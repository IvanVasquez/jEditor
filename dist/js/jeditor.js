!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.$=t():e.$=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{jEditor:()=>H});var n={};function o(e){var t=document.querySelector(".helper"),n=_jeditor.getOptions(),o=n.locale,r=n.sizeUnit,i=parseInt(e.getAttribute("data-element")),c=a(r,n.sizeDecimals,n.dpi,e.offsetHeight)+r,s=a(r,n.sizeDecimals,n.dpi,e.offsetWidth)+r,l=a(r,n.sizeDecimals,n.dpi,e.offsetTop)+r,d=a(r,n.sizeDecimals,n.dpi,e.offsetLeft)+r,u='<div class="content">';t.innerHTML='<div class="header">'.concat(n.elements[i].text,"</div>"),u+="<div><strong>".concat(o.height,"</strong>").concat(c,"</div>"),u+="<div><strong>".concat(o.width,"</strong>").concat(s,"</div>"),u+="<div><strong>".concat(o.top,"</strong>").concat(l,"</div>"),u+="<div><strong>".concat(o.left,"</strong>").concat(d,"</div>"),t.innerHTML+="".concat(u,"</div>")}function a(e,t,n,o){switch(e){case"mm":return r(25.4*o/n,t);case"cm":return r(25.4*o/n/10,t);case"inch":return r(o/n,t);default:return r(o,t)}}function r(e,t){return e.toFixed(t)}e.r(n),e.d(n,{addElement:()=>f,cancelModifyElement:()=>h,changePaper:()=>S,exitConfirmation:()=>A,modifyElement:()=>p,removeElement:()=>v,renderObjects:()=>w,saveData:()=>E,setBackground:()=>_,setPaper:()=>O,toast:()=>T,toggleRender:()=>L,unsaved:()=>j,zoomIn:()=>g,zoomOut:()=>y,zoomReset:()=>b});var i=function(){return _jeditor.getOptions()},c=function(e){return _jeditor.setOptions(e)},s=function(){return _jeditor.getData()},l=function(e){return _jeditor.setData(e)};function d(e){var t=document.querySelector(".page");c({zoom:e}),t.style.zoom=e}function u(e,t){document.querySelectorAll('[data-element="'.concat(t,'"].btn')).forEach((function(e){e.classList.toggle("d-none")})),e.classList.toggle("active")}function m(e){var t=s(),n=function(e,t,n){for(var o=0;o<e.length;o+=1)if(e[o].element===n)return o;return-1}(t,0,parseInt(e.getAttribute("data-element")));t[n].width=e.offsetWidth,t[n].height=e.offsetHeight,t[n].top=e.offsetTop,t[n].left=e.offsetLeft,l(t),j()}function f(e){var t,n,o;e.stopPropagation();var a=e.target.closest("li"),r=parseInt(a.getAttribute("data-element")),c=i().elements[r];if(a.classList.contains("active"))return!1;u(a,r);var d=s(),m=c.align&&null!==(t=c.textAlign)&&void 0!==t?t:"initial";return d.push({element:r,fontSize:c.fontSize||20,width:null!==(n=c.width)&&void 0!==n?n:100,height:null!==(o=c.height)&&void 0!==o?o:20,left:0,top:0,align:m,value:c.value||"",placeholder:c.placeholder||""}),w(),l(d)}function v(e){e.stopPropagation();var t=e.target.closest("li"),n=parseInt(t.getAttribute("data-element")),o=document.querySelector('.object[data-element="'.concat(n,'"]'));if(!t.classList.contains("active"))return!1;u(t,n);var a=s().filter((function(e){return e.element!==n}));return o.remove(),l(a)}function p(e){var t=e.target.getAttribute("data-element"),n=document.querySelector(".detail .content"),o=document.querySelector(".detail .actions"),a=i(),r=a.elements[t];document.querySelector(".detail").classList.remove("d-none"),document.querySelector(".elements-wrapper").classList.add("d-none"),document.querySelector(".detail .header").innerHTML=r.text,n.innerHTML="",o.innerHTML='<button class="btn warning">'.concat(a.locale.return,"</button>"),document.querySelector(".detail .actions button.warning").addEventListener("click",a.events.cancelModifyElement)}function h(e){var t=document.querySelector(".detail .content");document.querySelector(".detail").classList.add("d-none"),document.querySelector(".elements-wrapper").classList.remove("d-none"),t.innerHTML=""}function g(){d(i().zoom+i().zoomIncrement)}function y(){d(i().zoom-i().zoomIncrement)}function b(){var e=document.querySelector(".document").offsetWidth,t=document.querySelector(".page").offsetWidth;d(Math.round(e/t*10)/10-.13)}function S(e){var t=Object.keys(i().paperSizes),n=t.indexOf(i().paperSize)+1;O(e,t[n===t.length?0:n])}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a4",n=i().paperSizes[t],o=document.querySelector(".page");return n&&(o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),c({paperSize:t}),b(),T(i().locale.paperChange.replace(":size",n.name),"bg-success")),!1}function w(){document.querySelector(".page").innerHTML="",s().forEach((function(e){!function(e){var t,n,o,a=document.querySelector(".page"),r=null===(t=i())||void 0===t?void 0:t.elements[e.element];a.innerHTML+='<div class="object" data-element="'.concat(e.element,'">').concat(null!==(n=r.placeholder)&&void 0!==n?n:""," ").concat(r.value,"</div>");var c=document.querySelector('[data-element="'.concat(e.element,'"].object'));c.style.width=e.width+"px",c.style.height=e.height+"px",c.style.top=e.top+"px",c.style.left=e.left+"px",c.style.textAlign=null!==(o=e.align)&&void 0!==o?o:"initial";var s=document.querySelector('li[data-element="'.concat(e.element,'"]'));i().rendered&&c.classList.add("rendered"),s.classList.contains("active")||u(s,e.element)}(e)}));var e=i().helper,t=document.querySelectorAll(".object:not(.rendered)");!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2?arguments[2]:void 0,a=0,r=0,i=0,c=0,s=null,l=100,d=document.querySelector(".helper");function u(e){if(e.target.classList.contains("resizer"))return!1;(s=this).style.zIndex=""+ ++l,e=e||window.event,i=e.clientX,c=e.clientY,document.onmouseup=f,document.onmousemove=m}function m(e){if(s){e=e||window.event,a=i-e.clientX,r=c-e.clientY,i=e.clientX,c=e.clientY;var l=s.parentNode.offsetHeight-s.offsetHeight,d=s.parentNode.offsetWidth-s.offsetWidth+1,u=s.offsetTop-r;u=u<0?0:u>l?l:u,s.style.top=u+"px";var m=s.offsetLeft-a;m=m<0?0:m>d?d:m,s.style.left=m+"px",t(s),n&&o(s)}}function f(){document.onmouseup=null,document.onmousemove=null,n&&(d.innerHTML="")}e.forEach((function(e){e.onmousedown=u}))}(t,m,e),function(e){var t,n,a,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},c=arguments.length>2?arguments[2]:void 0,s=null,l=document.querySelector(".helper");function d(e){s=this.parentObject,t=e.clientX,n=e.clientY,a=parseInt(document.defaultView.getComputedStyle(s).width,10),r=parseInt(document.defaultView.getComputedStyle(s).height,10),document.documentElement.addEventListener("mousemove",u,!1),document.documentElement.addEventListener("mouseup",m,!1)}function u(e){var l=a+e.clientX-t;s.style.width=(l<10?10:l)+"px";var d=r+e.clientY-n;s.style.height=(d<10?10:d)+"px",i(s),c&&o(s)}function m(){document.documentElement.removeEventListener("mousemove",u,!1),document.documentElement.removeEventListener("mouseup",m,!1),c&&(l.innerHTML="")}e.forEach((function(e){var t=document.createElement("div");t.className="resizer resizer-right",e.appendChild(t),t.addEventListener("mousedown",d,!1),t.parentObject=e;var n=document.createElement("div");n.className="resizer resizer-bottom",e.appendChild(n),n.addEventListener("mousedown",d,!1),n.parentObject=e;var o=document.createElement("div");o.className="resizer resizer-both",e.appendChild(o),o.addEventListener("mousedown",d,!1),o.parentObject=e}))}(t,m,e)}function L(){c({rendered:!i().rendered}),w()}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=document.querySelector(".toasts-wrapper"),a=document.createElement("div");a.className="toast ".concat(t),a.innerHTML=e,o.appendChild(a),setTimeout((function(){a.remove()}),n)}function j(){window.addEventListener("beforeunload",A),document.querySelector(".btn[data-action=saveData]").className="btn primary"}function A(e){return(e||window.event).returnValue="Changes you made may not be saved.","Changes you made may not be saved."}function E(){window.removeEventListener("beforeunload",A),document.querySelector(".btn[data-action=saveData]").className="btn",T(i().locale.saved,"bg-success")}function _(){}var z={background:null,container:".jEditor",data:[],dpi:150,elements:[],elementAction:"addElement",elementFunctions:[{action:"modifyElement",content:'<span class="fa fa-edit"></span>',class:"btn info",show:!1},{action:"removeElement",content:'<span class="fa fa-times"></span>',class:"btn danger",show:!1}],events:n,extraFunctions:[],helper:!0,locale:{width:"Width",height:"Height",top:"Top margin",left:"Left margin",return:"Return",paperChange:"The paper has ben set to :size",saved:"Changes saved"},paperSize:"a4",paperSizes:{letter:{name:"Letter",width:1276,height:1648},a4:{name:"A4",width:1240,height:1754},a5:{name:"A5",width:1240,height:874}},rendered:!1,settings:[{action:"toggleRender",content:'<span class="fa fa-edit"></span>',class:"btn",show:!0},{action:"changePaper",content:'<span class="fa fa-file"></span>',class:"btn",show:!0},{action:"zoomOut",content:'<span class="fa fa-minus"></span>',class:"btn",show:!0},{action:"zoomIn",content:'<span class="fa fa-plus"></span>',class:"btn",show:!0},{action:"zoomReset",content:'<span class="fa fa-expand-arrows-alt"></span>',class:"btn",show:!0}],sizeDecimals:1,sizeUnit:"cm",title:"jEditor",zoom:1,zoomIncrement:.1};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const I=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"getOptions",(function(){return n._ACTUAL_OPTIONS})),C(this,"setOptions",(function(e){return n._ACTUAL_OPTIONS=q(q({},n._ACTUAL_OPTIONS),e)})),C(this,"getData",(function(){return n._ACTUAL_OPTIONS.data})),C(this,"setData",(function(e){return n._ACTUAL_OPTIONS.data=e})),this._ACTUAL_OPTIONS=q(q({},z),t)}var t,n;return t=e,(n=[{key:"render",value:function(){this.createStructure(),this.renderElements(),this.renderSettings(),this.renderExtraSettings(),this.renderObjects()}},{key:"createStructure",value:function(){var e=document.querySelector(this._ACTUAL_OPTIONS.container);e.innerHTML+='<div class="panel"></div><div class="document"></div><div class="toasts-wrapper"></div>';var t=e.querySelector(".panel");t.innerHTML+='<div class="title">'.concat(this._ACTUAL_OPTIONS.title,"</div>"),t.innerHTML+='<div class="elements-wrapper"><ul class="elements"></ul></div>',t.innerHTML+='<div class="detail d-none"><div class="header"></div><div class="content"></div><div class="actions"></div></div>',t.innerHTML+='<div class="settings"><div class="extra"></div><div class="base"></div></div>',t.innerHTML+='<div class="helper"></div>',e.querySelector(".document").innerHTML+='<div class="page-wrapper"><div class="page"></div></div>'}},{key:"renderElements",value:function(){var e,t=this._ACTUAL_OPTIONS,n=document.querySelector(".elements");null===(e=t.elements)||void 0===e||e.forEach((function(e,o){var a,r="";null===(a=t.elementFunctions)||void 0===a||a.forEach((function(e){r+='<button class="'.concat(e.class," ").concat(e.show?"":"d-none",'" data-action="').concat(e.action,'" data-element="').concat(o,'">').concat(e.content,"</button>")})),n.innerHTML+='<li class="element" id="element_'.concat(o,'" data-action="').concat(t.elementAction,'" data-element="').concat(o,'">            \n            <div class="text">').concat(e.text,'</div>\n            <div class="actions" data-id="').concat(o,'">').concat(r,"</div>            \n            </li>")}))}},{key:"renderSettings",value:function(){var e,t=document.querySelector(".settings .base");null===(e=this._ACTUAL_OPTIONS.settings)||void 0===e||e.forEach((function(e,n){t.innerHTML+='<button class="'.concat(e.class," ").concat(e.show?"":"d-none",'" data-action="').concat(e.action,'" data-setting="').concat(n,'">').concat(e.content,"</button>")}))}},{key:"renderExtraSettings",value:function(){var e,t=document.querySelector(".settings .extra");null===(e=this._ACTUAL_OPTIONS.extraFunctions)||void 0===e||e.forEach((function(e,n){t.innerHTML+='<button class="'.concat(e.class," ").concat(e.show?"":"d-none",'" data-action="').concat(e.action,'" data-setting="').concat(n,'">').concat(e.content,"</button>")}))}},{key:"renderObjects",value:function(){this._ACTUAL_OPTIONS.events.renderObjects()}},{key:"setPaper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._ACTUAL_OPTIONS.paperSize;this._ACTUAL_OPTIONS.events.setPaper(void 0,e)}},{key:"triggers",value:function(){var e=this._ACTUAL_OPTIONS;document.querySelectorAll("[data-action]").forEach((function(t){var n=t.getAttribute("data-action"),o="function"==typeof window[n]?window[n]:e.events[n];t.addEventListener("click",o)}))}}])&&x(t.prototype,n),e}(),H=function(e){return window._jeditor?console.error("A variable _jeditor has already been created"):(window._jeditor=new I(e),_jeditor.render(),_jeditor.triggers(),_jeditor.setPaper(),_jeditor)};return t})()}));